# GitHub Self-Hosted Runner Configuration
# Copy this file to .env and fill in your values
#
# IMPORTANT: Never commit .env file to git (it contains secrets)

# ==============================================================================
# GitHub Configuration (REQUIRED)
# ==============================================================================

# Repository or Organization URL
# For single repository: https://github.com/owner/repo
# For organization-wide: https://github.com/owner
# Example (repo): https://github.com/andrelin/planechaser
# Example (org): https://github.com/andrelin
REPO_URL=https://github.com/your-username/your-repo

# GitHub Personal Access Token
# Generate at: https://github.com/settings/tokens
# Required scopes: repo, workflow
# Note: Store securely in password manager (1Password, Bitwarden, etc.)
GITHUB_PAT=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ==============================================================================
# Runner Configuration (OPTIONAL - defaults provided)
# ==============================================================================

# Runner name (visible in GitHub UI)
# Default: synology-general-runner
RUNNER_NAME=synology-general-runner

# Runner labels (comma-separated, used for workflow targeting)
# Default: self-hosted,linux,synology,general
# Note: "self-hosted" and "linux" are added automatically by GitHub
LABELS=self-hosted,linux,synology,general

# Runner workspace directory
# Default: /volume1/docker/github-runner/workspace
# IMPORTANT: This must be the same path on both host and container for Docker-in-Docker!
# Tools like Qodana, Trivy, etc. that run Docker inside workflows need this to work.
# Do not change unless you understand Docker-in-Docker bind mount requirements.
RUNNER_WORKDIR=/volume1/docker/github-runner/workspace

# Runner scope (determines where runner is registered)
# Options: 'repo' (single repository) or 'org' (organization-wide)
# Default: repo
#
# Use 'repo' when:
# - REPO_URL is https://github.com/owner/repo (single repository)
# - GitHub PAT needs: repo, workflow scopes
#
# Use 'org' when:
# - REPO_URL is https://github.com/owner (organization)
# - GitHub PAT needs: repo, workflow, admin:org (manage_runners:org) scopes
# - All repositories in the organization can use this runner
#
RUNNER_SCOPE=repo

# ==============================================================================
# Resource Limits (OPTIONAL - defaults provided)
# ==============================================================================

# Memory limit (for container)
# Examples: 5g (5 gigabytes), 8g (8 gigabytes), 3g (3 gigabytes)
# Default: 5g
# Note: Adjust based on your NAS available memory
RUNNER_MEMORY=5g

# CPU priority (higher = more priority)
# Default: 1536 (higher than default 1024)
# Range: 0-2048 (higher number = higher priority)
RUNNER_CPU_SHARES=1536

# Tmpfs sizes (in-memory temporary storage)
# Default: /tmp=1g, /run=512m
# Increase if you have workflows that need more temp space
TMPFS_TMP_SIZE=1g
TMPFS_RUN_SIZE=512m

# ==============================================================================
# Build Tool Configuration (OPTIONAL)
# ==============================================================================

# Gradle JVM options (for Java/Kotlin/Android projects)
# Default: -Xmx3g -XX:+UseG1GC -XX:MaxGCPauseMillis=200
# Adjust -Xmx based on RUNNER_MEMORY (use ~60% of container limit)
# If RUNNER_MEMORY=5g, use -Xmx3g. If RUNNER_MEMORY=8g, use -Xmx5g
GRADLE_OPTS=-Xmx3g -XX:+UseG1GC -XX:MaxGCPauseMillis=200

# ==============================================================================
# Quick Start
# ==============================================================================
#
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Edit .env and set REPO_URL and GITHUB_PAT
#
# 3. (Optional) Adjust RUNNER_MEMORY and RUNNER_CPU_SHARES for your hardware
#
# 4. Start the runner:
#    docker-compose up -d
#
# 5. Check logs:
#    docker-compose logs -f
#
# 6. Verify runner appears in GitHub:
#    https://github.com/your-username/your-repo/settings/actions/runners
#
# ==============================================================================
# Resource Tuning Guide
# ==============================================================================
#
# For 2-core/8GB NAS:
#   RUNNER_MEMORY=5g
#   RUNNER_CPU_SHARES=1536
#   GRADLE_OPTS=-Xmx3g ...
#
# For 4-core/16GB NAS:
#   RUNNER_MEMORY=10g
#   RUNNER_CPU_SHARES=2048
#   GRADLE_OPTS=-Xmx6g ...
#
# For 4-core/8GB NAS (tight):
#   RUNNER_MEMORY=4g
#   RUNNER_CPU_SHARES=1536
#   GRADLE_OPTS=-Xmx2g ...
#
